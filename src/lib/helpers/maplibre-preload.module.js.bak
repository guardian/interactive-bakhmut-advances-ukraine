function t(e,n){return(t=Object.setPrototypeOf||function(t,e){return t.__proto__=e,t})(e,n)}function e(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){})),!0}catch(t){return!1}}function n(r,i,o){return(n=e()?Reflect.construct:function(e,n,r){var i=[null];i.push.apply(i,n);var o=new(Function.bind.apply(e,i));return r&&t(o,r.prototype),o}).apply(null,arguments)}var r=Math.PI/180,i=180/Math.PI;function o(t){var e=a(t[0]+1,t[2]);return[a(t[0],t[2]),s(t[1]+1,t[2]),e,s(t[1],t[2])]}function a(t,e){return t/Math.pow(2,e)*360-180}function s(t,e){var n=Math.PI-2*Math.PI*t/Math.pow(2,e);return i*Math.atan(.5*(Math.exp(n)-Math.exp(-n)))}function c(t,e,n){var r=m(t,e,n);return r[0]=Math.floor(r[0]),r[1]=Math.floor(r[1]),r}function u(t){return[[2*t[0],2*t[1],t[2]+1],[2*t[0]+1,2*t[1],t[2]+1],[2*t[0]+1,2*t[1]+1,t[2]+1],[2*t[0],2*t[1]+1,t[2]+1]]}function h(t){return[t[0]>>1,t[1]>>1,t[2]-1]}function l(t){return u(h(t))}function f(t,e){for(var n=0;n<t.length;n++)if(p(t[n],e))return!0;return!1}function p(t,e){return t[0]===e[0]&&t[1]===e[1]&&t[2]===e[2]}function m(t,e,n){var i=Math.sin(e*r),o=Math.pow(2,n),a=o*(t/360+.5);return(a%=o)<0&&(a+=o),[a,o*(.5-.25*Math.log((1+i)/(1-i))/Math.PI),n]}var v={tileToGeoJSON:function(t){var e=o(t);return{type:"Polygon",coordinates:[[[e[0],e[3]],[e[0],e[1]],[e[2],e[1]],[e[2],e[3]],[e[0],e[3]]]]}},tileToBBOX:o,getChildren:u,getParent:h,getSiblings:l,hasTile:f,hasSiblings:function(t,e){for(var n=l(t),r=0;r<n.length;r++)if(!f(e,n[r]))return!1;return!0},tilesEqual:p,tileToQuadkey:function(t){for(var e="",n=t[2];n>0;n--){var r=0,i=1<<n-1;0!=(t[0]&i)&&r++,0!=(t[1]&i)&&(r+=2),e+=r.toString()}return e},quadkeyToTile:function(t){for(var e=0,n=0,r=t.length,i=r;i>0;i--){var o=1<<i-1,a=+t[r-i];1===a&&(e|=o),2===a&&(n|=o),3===a&&(e|=o,n|=o)}return[e,n,r]},pointToTile:c,bboxToTile:function(t){var e=c(t[0],t[1],32),n=c(t[2],t[3],32),r=[e[0],e[1],n[0],n[1]],i=function(t){for(var e=0;e<28;e++){var n=1<<32-(e+1);if((t[0]&n)!=(t[2]&n)||(t[1]&n)!=(t[3]&n))return e}return 28}(r);return 0===i?[0,0,0]:[r[0]>>>32-i,r[1]>>>32-i,i]},pointToTileFraction:m},d=Object.assign(Object.create(null),v,{default:v});function g(t){var e={exports:{}};return t(e,e.exports),e.exports}"undefined"!=typeof globalThis?globalThis:"undefined"!=typeof window?window:"undefined"!=typeof global?global:"undefined"!=typeof self&&self;var y=g(function(t,e){var n=function(){var t={},e=Math.PI/180,n=180/Math.PI,r=6378137,i=20037508.342789244;function o(t){return Number(t)===t&&t%1!=0}function a(e){if(this.size=(e=e||{}).size||256,!t[this.size]){var n=this.size,r=t[this.size]={};r.Bc=[],r.Cc=[],r.zc=[],r.Ac=[];for(var i=0;i<30;i++)r.Bc.push(n/360),r.Cc.push(n/(2*Math.PI)),r.zc.push(n/2),r.Ac.push(n),n*=2}this.Bc=t[this.size].Bc,this.Cc=t[this.size].Cc,this.zc=t[this.size].zc,this.Ac=t[this.size].Ac}return a.prototype.px=function(t,n){if(o(n)){var r=this.size*Math.pow(2,n),i=r/2,a=r/360,s=r/(2*Math.PI),c=r,u=Math.min(Math.max(Math.sin(e*t[1]),-.9999),.9999);return(h=i+t[0]*a)>c&&(h=c),(l=i+.5*Math.log((1+u)/(1-u))*-s)>c&&(l=c),[h,l]}i=this.zc[n],u=Math.min(Math.max(Math.sin(e*t[1]),-.9999),.9999);var h=Math.round(i+t[0]*this.Bc[n]),l=Math.round(i+.5*Math.log((1+u)/(1-u))*-this.Cc[n]);return h>this.Ac[n]&&(h=this.Ac[n]),l>this.Ac[n]&&(l=this.Ac[n]),[h,l]},a.prototype.ll=function(t,e){if(o(e)){var r=this.size*Math.pow(2,e),i=r/(2*Math.PI),a=r/2,s=(t[1]-a)/-i;return[(t[0]-a)/(r/360),n*(2*Math.atan(Math.exp(s))-.5*Math.PI)]}return s=(t[1]-this.zc[e])/-this.Cc[e],[(t[0]-this.zc[e])/this.Bc[e],n*(2*Math.atan(Math.exp(s))-.5*Math.PI)]},a.prototype.bbox=function(t,e,n,r,i){r&&(e=Math.pow(2,n)-1-e);var o=[(+t+1)*this.size,e*this.size],a=this.ll([t*this.size,(+e+1)*this.size],n).concat(this.ll(o,n));return"900913"===i?this.convert(a,"900913"):a},a.prototype.xyz=function(t,e,n,r){"900913"===r&&(t=this.convert(t,"WGS84"));var i=[t[2],t[3]],o=this.px([t[0],t[1]],e),a=this.px(i,e),s=[Math.floor(o[0]/this.size),Math.floor((a[0]-1)/this.size)],c=[Math.floor(a[1]/this.size),Math.floor((o[1]-1)/this.size)],u={minX:Math.min.apply(Math,s)<0?0:Math.min.apply(Math,s),minY:Math.min.apply(Math,c)<0?0:Math.min.apply(Math,c),maxX:Math.max.apply(Math,s),maxY:Math.max.apply(Math,c)};if(n){var h={minY:Math.pow(2,e)-1-u.maxY,maxY:Math.pow(2,e)-1-u.minY};u.minY=h.minY,u.maxY=h.maxY}return u},a.prototype.convert=function(t,e){return"900913"===e?this.forward(t.slice(0,2)).concat(this.forward(t.slice(2,4))):this.inverse(t.slice(0,2)).concat(this.inverse(t.slice(2,4)))},a.prototype.forward=function(t){var n=[r*t[0]*e,r*Math.log(Math.tan(.25*Math.PI+.5*t[1]*e))];return n[0]>i&&(n[0]=i),n[0]<-i&&(n[0]=-i),n[1]>i&&(n[1]=i),n[1]<-i&&(n[1]=-i),n},a.prototype.inverse=function(t){return[t[0]*n/r,(.5*Math.PI-2*Math.atan(Math.exp(-t[1]/r)))*n]},a}();t.exports=n}),x={},M=function(t,e,n,r){void 0!==t.lon&&(t=[t.lon,t.lat]);var i=function(t){return x[t=t||256]||(x[t]=new y({size:t})),x[t]}(r),o=i.px(t,e),a=i.ll([o[0]-n[0]/2,o[1]-n[1]/2],e),s=i.ll([o[0]+n[0]/2,o[1]+n[1]/2],e);return[a[0],s[1],s[0],a[1]]},b=g(function(t,e){t.exports=function(){function t(t){return t.charAt(0).toUpperCase()+t.substring(1)}function e(t){return function(){return this[t]}}var n=["isConstructor","isEval","isNative","isToplevel"],r=["columnNumber","lineNumber"],i=["fileName","functionName","source"],o=n.concat(r,i,["args"],["evalOrigin"]);function a(e){if(e)for(var n=0;n<o.length;n++)void 0!==e[o[n]]&&this["set"+t(o[n])](e[o[n]])}a.prototype={getArgs:function(){return this.args},setArgs:function(t){if("[object Array]"!==Object.prototype.toString.call(t))throw new TypeError("Args must be an Array");this.args=t},getEvalOrigin:function(){return this.evalOrigin},setEvalOrigin:function(t){if(t instanceof a)this.evalOrigin=t;else{if(!(t instanceof Object))throw new TypeError("Eval Origin must be an Object or StackFrame");this.evalOrigin=new a(t)}},toString:function(){var t=this.getFileName()||"",e=this.getLineNumber()||"",n=this.getColumnNumber()||"",r=this.getFunctionName()||"";return this.getIsEval()?t?"[eval] ("+t+":"+e+":"+n+")":"[eval]:"+e+":"+n:r?r+" ("+t+":"+e+":"+n+")":t+":"+e+":"+n}},a.fromString=function(t){var e=t.indexOf("("),n=t.lastIndexOf(")"),r=t.substring(0,e),i=t.substring(e+1,n).split(","),o=t.substring(n+1);if(0===o.indexOf("@"))var s=/@(.+?)(?::(\d+))?(?::(\d+))?$/.exec(o,""),c=s[1],u=s[2],h=s[3];return new a({functionName:r,args:i||void 0,fileName:c,lineNumber:u||void 0,columnNumber:h||void 0})};for(var s=0;s<n.length;s++)a.prototype["get"+t(n[s])]=e(n[s]),a.prototype["set"+t(n[s])]=function(t){return function(e){this[t]=Boolean(e)}}(n[s]);for(var c=0;c<r.length;c++)a.prototype["get"+t(r[c])]=e(r[c]),a.prototype["set"+t(r[c])]=function(t){return function(e){if(n=e,isNaN(parseFloat(n))||!isFinite(n))throw new TypeError(t+" must be a Number");var n;this[t]=Number(e)}}(r[c]);for(var u=0;u<i.length;u++)a.prototype["get"+t(i[u])]=e(i[u]),a.prototype["set"+t(i[u])]=function(t){return function(e){this[t]=String(e)}}(i[u]);return a}()}),w=g(function(t,e){var n,r,i,o;t.exports=(n=b,r=/(^|@)\S+:\d+/,i=/^\s*at .*(\S+:\d+|\(native\))/m,o=/^(eval@)?(\[native code])?$/,{parse:function(t){if(void 0!==t.stacktrace||void 0!==t["opera#sourceloc"])return this.parseOpera(t);if(t.stack&&t.stack.match(i))return this.parseV8OrIE(t);if(t.stack)return this.parseFFOrSafari(t);throw new Error("Cannot parse given Error object")},extractLocation:function(t){if(-1===t.indexOf(":"))return[t];var e=/(.+?)(?::(\d+))?(?::(\d+))?$/.exec(t.replace(/[()]/g,""));return[e[1],e[2]||void 0,e[3]||void 0]},parseV8OrIE:function(t){return t.stack.split("\n").filter(function(t){return!!t.match(i)},this).map(function(t){t.indexOf("(eval ")>-1&&(t=t.replace(/eval code/g,"eval").replace(/(\(eval at [^()]*)|(\),.*$)/g,""));var e=t.replace(/^\s+/,"").replace(/\(eval code/g,"("),r=e.match(/ (\((.+):(\d+):(\d+)\)$)/),i=(e=r?e.replace(r[0],""):e).split(/\s+/).slice(1),o=this.extractLocation(r?r[1]:i.pop()),a=i.join(" ")||void 0,s=["eval","<anonymous>"].indexOf(o[0])>-1?void 0:o[0];return new n({functionName:a,fileName:s,lineNumber:o[1],columnNumber:o[2],source:t})},this)},parseFFOrSafari:function(t){return t.stack.split("\n").filter(function(t){return!t.match(o)},this).map(function(t){if(t.indexOf(" > eval")>-1&&(t=t.replace(/ line (\d+)(?: > eval line \d+)* > eval:\d+:\d+/g,":$1")),-1===t.indexOf("@")&&-1===t.indexOf(":"))return new n({functionName:t});var e=/((.*".+"[^@]*)?[^@]*)(?:@)/,r=t.match(e),i=r&&r[1]?r[1]:void 0,o=this.extractLocation(t.replace(e,""));return new n({functionName:i,fileName:o[0],lineNumber:o[1],columnNumber:o[2],source:t})},this)},parseOpera:function(t){return!t.stacktrace||t.message.indexOf("\n")>-1&&t.message.split("\n").length>t.stacktrace.split("\n").length?this.parseOpera9(t):t.stack?this.parseOpera11(t):this.parseOpera10(t)},parseOpera9:function(t){for(var e=/Line (\d+).*script (?:in )?(\S+)/i,r=t.message.split("\n"),i=[],o=2,a=r.length;o<a;o+=2){var s=e.exec(r[o]);s&&i.push(new n({fileName:s[2],lineNumber:s[1],source:r[o]}))}return i},parseOpera10:function(t){for(var e=/Line (\d+).*script (?:in )?(\S+)(?:: In function (\S+))?$/i,r=t.stacktrace.split("\n"),i=[],o=0,a=r.length;o<a;o+=2){var s=e.exec(r[o]);s&&i.push(new n({functionName:s[3]||void 0,fileName:s[2],lineNumber:s[1],source:r[o]}))}return i},parseOpera11:function(t){return t.stack.split("\n").filter(function(t){return!!t.match(r)&&!t.match(/^Error created at/)},this).map(function(t){var e,r=t.split("@"),i=this.extractLocation(r.pop()),o=r.shift()||"",a=o.replace(/<anonymous function(: (\w+))?>/,"$2").replace(/\([^)]*\)/g,"")||void 0;o.match(/\(([^)]*)\)/)&&(e=o.replace(/^[^(]+\(([^)]*)\)$/,"$1"));var s=void 0===e||"[arguments not available]"===e?void 0:e.split(",");return new n({functionName:a,args:s,fileName:i[0],lineNumber:i[1],columnNumber:i[2],source:t})},this)}})}),_=z;function z(t,e){this.x=t,this.y=e}z.prototype={clone:function(){return new z(this.x,this.y)},add:function(t){return this.clone()._add(t)},sub:function(t){return this.clone()._sub(t)},multByPoint:function(t){return this.clone()._multByPoint(t)},divByPoint:function(t){return this.clone()._divByPoint(t)},mult:function(t){return this.clone()._mult(t)},div:function(t){return this.clone()._div(t)},rotate:function(t){return this.clone()._rotate(t)},rotateAround:function(t,e){return this.clone()._rotateAround(t,e)},matMult:function(t){return this.clone()._matMult(t)},unit:function(){return this.clone()._unit()},perp:function(){return this.clone()._perp()},round:function(){return this.clone()._round()},mag:function(){return Math.sqrt(this.x*this.x+this.y*this.y)},equals:function(t){return this.x===t.x&&this.y===t.y},dist:function(t){return Math.sqrt(this.distSqr(t))},distSqr:function(t){var e=t.x-this.x,n=t.y-this.y;return e*e+n*n},angle:function(){return Math.atan2(this.y,this.x)},angleTo:function(t){return Math.atan2(this.y-t.y,this.x-t.x)},angleWith:function(t){return this.angleWithSep(t.x,t.y)},angleWithSep:function(t,e){return Math.atan2(this.x*e-this.y*t,this.x*t+this.y*e)},_matMult:function(t){var e=t[2]*this.x+t[3]*this.y;return this.x=t[0]*this.x+t[1]*this.y,this.y=e,this},_add:function(t){return this.x+=t.x,this.y+=t.y,this},_sub:function(t){return this.x-=t.x,this.y-=t.y,this},_mult:function(t){return this.x*=t,this.y*=t,this},_div:function(t){return this.x/=t,this.y/=t,this},_multByPoint:function(t){return this.x*=t.x,this.y*=t.y,this},_divByPoint:function(t){return this.x/=t.x,this.y/=t.y,this},_unit:function(){return this._div(this.mag()),this},_perp:function(){var t=this.y;return this.y=this.x,this.x=-t,this},_rotate:function(t){var e=Math.cos(t),n=Math.sin(t),r=n*this.x+e*this.y;return this.x=e*this.x-n*this.y,this.y=r,this},_rotateAround:function(t,e){var n=Math.cos(t),r=Math.sin(t),i=e.y+r*(this.x-e.x)+n*(this.y-e.y);return this.x=e.x+n*(this.x-e.x)-r*(this.y-e.y),this.y=i,this},_round:function(){return this.x=Math.round(this.x),this.y=Math.round(this.y),this}},z.convert=function(t){return t instanceof z?t:Array.isArray(t)?new z(t[0],t[1]):t};var O=globalThis.maplibregl;void 0!==O?(console.log("lib exists"),O.Map.prototype.cachedPanTo=function(t,e){var n=Object.assign({},e,{type:"pan",center:t},this._context(e));if(this._precache(n),e.run)return this.panTo(point,e)},O.Map.prototype.cachedZoomTo=function(t,e){var n=Object.assign({},e,{type:"zoom",zoom:t},this._context(e));if(this._precache(n),e.run)return this.zoomTo(t,e)},O.Map.prototype.cachedJumpTo=function(t){var e=Object.assign({},t,{type:"jump"},this._context(t));if(this._precache(e),t.run)return this.jumpTo(e)},O.Map.prototype.cachedEaseTo=function(t){var e=Object.assign({},t,{type:"ease"},this._context(t));if(this._precache(e),t.run)return this.easeTo(e)},O.Map.prototype.cachedFitBounds=function(t,e){console.log(t,e);var n=Object.assign({},e,{type:"fitBounds",bounds:t},this._context(e));if(this._precache(n),e.run)return this.fitBounds(t,e)},O.Map.prototype.cachedFlyTo=function(t){t.type="fly";var e=Object.assign({},t,{type:"fly"},this._context(t));if(this._precache(e),t.run)return this.flyTo(e)},O.Map.prototype._context=function(t){var e=this,r=Object.entries(this.getStyle().sources).filter(function(t){return["vector","raster"].indexOf(t[1].type)>-1&&(void 0!==t[1].url||void 0!==t[1].tiles)}).map(function(t){return e.getSource(t[0]).tiles[0]}),i=[this.getCanvas().width,this.getCanvas().height],o=this.transform.tileSize,a=this.getCenter(),s=t.zoom?Math.min(this.getZoom(),t.zoom):this.getZoom();if("fly"==t.type){var c=_.convert(t.offset||[0,0]),u=this.transform.centerPoint.add(c),h=this.transform.pointLocation(u),l=n(O.LngLat,t.center);this._normalizeCenter(l);var f=this.transform.project(h),p=this.transform.project(l).sub(f),m=t.curve||1.42,v=2*m*m*p.mag(),d=this.getZoom()+this.transform.scaleZoom(1/v);s=Math.floor(Math.max(Math.min(s+d,t.minZoom||s+d),0))}if("fitBounds"===t.type){var g=Object.assign({},t);delete g.type;var y=M(t.bounds,null,i,o),x=this.getBoundsZoom(t.bounds,i);s=Math.floor(Math.max(Math.min(s+x,t.minZoom||s+x),0)),Object.assign(g,{zoom:x});var b=bboxtiles(y,x);r.push.apply(r,b.map(function(t){return e.getSource(t[2]).tiles[0]}))}return{sources:r,dimensions:i,tilesize:o,startCenter:[a.lng,a.lat],startZoom:this.getZoom(),zmin:s}},O.Map.prototype._precache=function(t){var e=this;if(window===self&&null==this.precache_worker){var n="\n            importScripts('"+w.parse(new Error("not an actual error!"))[0].fileName+"');\n            let controller;\n            let signal;\n            onmessage = function (o){\n                if (controller !== undefined && controller.signal !== undefined && !controller.signal.aborted){\n                    controller.abort();               \n                }\n                if (o.data.abort){\n                    postMessage({t: Date.now(), e: true});\n                    return;\n                }\n                controller = new AbortController();\n                signal = controller.signal;     \n                let _func = "+T.toString()+";\n                _func.apply(null, [o.data]);\n            }",r=URL.createObjectURL(new Blob([n],{type:"text/javascript"}));this.precache_worker=new Worker(r),this.precache_worker.onmessage=function(n){e.precache_worker.time1=n.data.t,t.debug&&console.log("Precaching time: "+(e.precache_worker.time1-e.precache_worker.time0)+"ms")}}delete this.precache_worker.time1,this.once("moveend",function(n){null==e.precache_worker.time1?(e.precache_worker.postMessage({abort:!0}),t.debug&&console.log("🔶 Movement has finished before preloading")):t.debug&&console.log("🔚 Movement ends "+(e.precache_worker.time1?Date.now()-e.precache_worker.time1:void 0)+" ms after precaching")}),this.precache_worker.time0=Date.now(),this.precache_worker.postMessage(t)}):console.log("lib does not exist");var T=function(t){var e,n,r=M(t.center,t.zoom,t.dimensions,t.tilesize),i=function(t,e){for(var n=v.pointToTile(t[0],t[1],e),r=v.pointToTile(t[2],t[3],e),i=[],o=n[0]-1;o<r[0]+2;o++)for(var a=r[1]-1;a<n[1]+2;a++)i.push([o,a,e]);return i},o=function(t,e,n){for(var r=v.pointToTile(t[0],t[1],n),i=r[0],o=r[1],a=v.pointToTile(e[0],e[1],n),s=a[0],c=a[1],u=[Math.abs(s-i),Math.abs(c-o)],h=u[0],l=u[1],f=i<s?1:-1,p=o<c?1:-1,m=(h>l?h:-l)/2,d=i,g=o,y=[];d!==s||g!==c;){y.push.apply(y,[[d,g,n]].concat(v.getSiblings([d,g,n])));var x=m;x>-h&&(m-=l,d+=f),x<l&&(m+=h,g+=p)}return y.push.apply(y,[[s,c,n]].concat(v.getSiblings([s,c,n]))),[].concat(new Set(y))},a=[].concat(o(t.startCenter,t.center,t.zmin));if("fly"==t.type&&(n=a).push.apply(n,o(t.startCenter,t.center,t.zmin-1).concat(o(t.startCenter,t.center,t.zmin+1))),"fitBounds"===t.type){var s,c=i(M(t.bounds,null,t.dimensions,t.tilesize),t.zoom);(s=a).push.apply(s,c)}for(var u=t.zoom;u>t.zmin-1;u--){var h,l=i(r,u);(h=a).push.apply(h,l),e=l.length}a=[].concat(new Set(a)),urls=a.map(function(e){return t.sources.map(function(t){return t.replace("{x}",e[0]).replace("{y}",e[1]).replace("{z}",e[2])})}).flat(),Promise.all(urls.map(function(t){return fetch(t,{signal:signal})})).then(function(n){t.debug&&console.log("Estimated gain: "+Math.round(900*e/6)+"ms"),t.debug&&console.log("Prefetched "+urls.length+" tiles at zoom levels ["+t.zmin+" - "+t.zoom+"]"),postMessage({t:Date.now(),e:!1})}).catch(function(e){t.debug&&"AbortError"!==e.name&&console.log("🔴 Precache error")})};globalThis.tilebelt=d,globalThis.bounds=M;
//# sourceMappingURL=maplibre-preload.module.js.map
